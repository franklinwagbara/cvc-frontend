<div class="view-application-container">
  <a
    [routerLink]="['/admin/my-desk']"
    class="flex my-1 justify-start back-btn-color items-center"
    mat-raised-button
  >
    <i class="material-icons">keyboard_double_arrow_left</i>
    <span>Back</span></a
  >
  <div class="view-application">
    <h2 mat-dialog-title class="text-center title">
      APPLICATION REFERENCE : {{ application?.reference }}
    </h2>

    <div mat-dialog-content class="content !overflow-x-auto">
      <div class="application-view min-w-[500px]">
        <app-coq-application-view-table
          [application]="application"
          [appId]="appId"
          [appSource]="appSource"
          [tankList]="tanksList"
        ></app-coq-application-view-table>
      </div>
      <div class="application-controls">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title> CURRENT DESK </mat-panel-title>
          </mat-expansion-panel-header>
          <p>{{ application?.currentDesk }}</p>
        </mat-expansion-panel>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title> UPLOADED DOCUMENTS </mat-panel-title>
          </mat-expansion-panel-header>
          <div *ngIf="documents" class="card-list">
            <div class="card-item">
              <div class="item-title">
                <a [href]="documents?.docSource" target="_blank">
                  <img
                    *ngIf="isPDF(documents?.docSource)"
                    src="../../../../assets/image/pdfIcon.png"
                    alt="open file"
                  />

                  <img
                    *ngIf="isIMG(documents?.docSource)"
                    src="../../../../assets/image/imageIcon.png"
                    alt="open file"
                  />

                  <img
                    *ngIf="
                      !isIMG(documents?.docSource) &&
                      !isPDF(documents?.docSource)
                    "
                    src="../../../../assets/image/otherFileType.png"
                    alt="open file"
                  />
                </a>
              </div>
              <div class="item-content">
                <a [href]="documents?.docSource" target="_blank">
                  {{ documents?.docName }}
                </a>
              </div>
            </div>
          </div>
        </mat-expansion-panel>
      </div>
      <div class="application-controls" *ngIf="isStaffDesk">
        <div class="actions">
          <button
            mat-raised-button
            class="bg-green-500 text-white"
            (click)="action('approve')"
          >
            Approve
          </button>
          <button mat-raised-button color="warn" (click)="action('sendBack')">
            Send Back
          </button>

          <!-- <button
            mat-stroked-button
            color="primary"
            (click)="action('assignApplication')"
          >
            Delegate Application
          </button> -->
        </div>
      </div>
    </div>
  </div>
</div>
